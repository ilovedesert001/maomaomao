(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t){},111:function(e,t){},141:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(35),c=n.n(r),i=(n(84),n(9)),s=n(76),u=n(19),l=n.n(u),d=n(38),m=n(16),f=n(18),v=o.a.createContext(null),p=function(){return Object(a.useContext)(v)},w=o.a.createContext(null),g=function(){return Object(a.useContext)(w)},h=function(e){var t={};return t.onNotify=e.onNotify||function(e){console.log(e)},t.getInitalList=e.getInitalList||function(){return[]},t.addItem=e.addItem||Object(d.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("\u4f8b\u5982\u53ef\u4ee5\u5199\u8fdb\u5230localstorge \u4e2d");case 1:case"end":return e.stop()}},e,this)})),t.removeItem=e.removeItem||Object(d.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("\u4ecelocalstorge \u4e2d\u5220\u9664");case 1:case"end":return e.stop()}},e,this)})),t.updateItem=e.updateItem||Object(d.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("uuupdate");case 1:case"end":return e.stop()}},e,this)})),t},E={Main:"Main",AddOrEdit:"AddOrEdit"};!function(e){var t={};Object.keys(e).forEach(function(n){t[e[n]]=n}),e._invert=t}(E);var b=n(26),k=n(69),O={},I=function(e){var t=O[e];return t||(t=k.TOTP(e),O[e]=t),t.now()},j=n(70),N=n.n(j),y=n(175),C=n(172),A=n(71),P=Object(i.a)(function(e){var t=e.account,n=p(),r=g(),c=function(){var e=N()(new Date);return e>30&&(e-=30),e},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(b.a)(t,2),o=n[0],r=n[1];return[o,function(e){e instanceof Function?r(function(t){return Object.assign(o,e(t))}):(Object.assign(o,e),r(o))}]}({leftTime:c(),code:I(t.secret)}),s=Object(b.a)(i,2),u=s[0],l=s[1];Object(a.useEffect)(function(){var e=setInterval(function(){l({leftTime:c(),code:I(t.secret)})},1e3);return function(){window.clearInterval(e)}},[]);var d=function(){A(u.code)},m=u.leftTime/30,f=!1;return m>.88&&(f=!0),o.a.createElement("div",{className:"Account ".concat(f?"noTimeToDo":" ")},o.a.createElement("div",{className:"Account-panel"},o.a.createElement("div",{className:"code-row"},o.a.createElement("div",{className:"ms-font-su ms-fontWeight-semibold tfa-code ms-fadeIn100",onClick:d},u.code),o.a.createElement("div",{className:"action-btns"},o.a.createElement(y.a,{iconProps:{iconName:"Copy"},onClick:d}),o.a.createElement(y.a,{iconProps:{iconName:"PageEdit"},onClick:function(){r.appRoute=E.AddOrEdit,r.addForm.isEdit=!0,r.addForm.secret=t.secret,r.addForm.remark=t.remark}}),o.a.createElement(y.a,{iconProps:{iconName:"PageRemove"},onClick:function(){n.removeItem(t.secret)}}))),o.a.createElement("div",null,o.a.createElement("div",{className:"ms-font-m"},o.a.createElement("pre",null,t.remark))),o.a.createElement(C.a,{percentComplete:m})))}),F=Object(i.a)(function(){var e=p().mainPageAccounts;return o.a.createElement("div",{className:"AccountList"},e.map(function(e){return o.a.createElement(P,{key:e.secret,account:e})}))}),x=n(173),R=Object(i.a)(function(){var e=p();return o.a.createElement("div",{className:"SearchBox"},o.a.createElement(x.a,{placeholder:"Search",onChange:function(t){e.searchText=t}}))}),L=n(170),T=n(171),W=Object(i.a)(function(){var e=p(),t=g(),n=t.addForm,a=n.secret,r=n.remark,c=n.isEdit;return o.a.createElement("div",{className:"AddForm"},o.a.createElement(L.a,{label:"\u8bf7\u8f93\u5165\u79d8\u94a5",required:!0,disabled:c,value:a,onChange:function(e){t.addForm.secret=e.target.value}}),o.a.createElement(L.a,{label:"\u8bf7\u8f93\u5165\u5176\u4ed6\u4fe1\u606f",multiline:!0,rows:3,value:r,onChange:function(e){t.addForm.remark=e.target.value}}),o.a.createElement("div",{className:"addButton"},o.a.createElement(T.a,{text:c?"\u66f4\u65b0":"\u6dfb\u52a0",onClick:function(){c?e.updateItem(t.addForm):e.addItem(t.addForm),t.appRoute=E.Main}})))}),M=n(167),S=Object(i.a)(function(){p();var e=g();return o.a.createElement("div",{className:"AppHeader"},o.a.createElement(M.a,{items:e.appRoute===E.AddOrEdit?[{key:"NavigateBack",iconProps:{iconName:"NavigateBack"},onClick:function(){e.appRoute=E.Main}}]:[{key:"newItem",iconProps:{iconName:"Add"},onClick:function(){e.appRoute=E.AddOrEdit,e.addForm.isEdit=!1,e.addForm.secret="",e.addForm.remark=""}},{key:"Download",iconProps:{iconName:"Download"},disabled:!0},{key:"upload",iconProps:{iconName:"Upload"},disabled:!0}],farItems:[{key:"info",name:"Info",iconProps:{iconName:"Info"},iconOnly:!0,onClick:function(){return console.log("Info")}}]}))}),B=n(74),U=n.n(B),D=n(75),J=n.n(D);var q=Object(i.a)(function(){p();var e=g(),t=Object(a.useRef)(null);Object(a.useRef)(null);return Object(a.useEffect)(function(){t.current=new FileReader,t.current.onload=function(e){new J.a(e.target.result).parse(function(e,t){if(e)throw e;var n=function(e){for(var t=new Uint8ClampedArray(e.width*e.height*4),n=0;n<e.height;n++)for(var a=0;a<e.width;a++){var o=e.getPixel(a,n);t[4*(n*e.width+a)+0]=o[0],t[4*(n*e.width+a)+1]=o[1],t[4*(n*e.width+a)+2]=o[2],t[4*(n*e.width+a)+3]=o[3]}return t}(t);console.log("a",U()(n,t.width,t.height))})}},[]),o.a.createElement("div",{className:"Main"},o.a.createElement(S,null),e.appRoute===E.Main&&o.a.createElement(o.a.Fragment,null,o.a.createElement(R,null),o.a.createElement(F,null)),e.appRoute===E.AddOrEdit&&o.a.createElement(o.a.Fragment,null,o.a.createElement(W,null)))}),H=n(166),$=n(48),_=function(){return $.get("accounts",[])},z=function(e){$.set("accounts",e)},G=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h({}),n=function(t){e[t]=Object(m.b)(t,e[t])},a={appConfig:{name:"tfa \u7ba1\u7406\u5668",test:"aaaa"},accountList:t.getInitalList(),searchText:"",get mainPageAccounts(){var t=f.trim(e.searchText);return""===t?e.accountList:e.findItems(t)},addItem:function(n){var a=n.secret,o={secret:a,remark:n.remark};f.find(e.accountList,{secret:a})?t.onNotify(o):(e.accountList.push(o),t.addItem(o))},removeItem:function(t){f.remove(e.accountList,{secret:t})},updateItem:function(n){var a=n.secret,o=n.remark,r=f.find(e.accountList,{secret:a});r&&(Object.assign(r,{remark:o}),t.updateItem(r))},findItems:function(t){var n=new Set;return e.accountList.forEach(function(e){e.secret.includes(t)&&n.add(e),e.remark.includes(t)&&n.add(e)}),Object(s.a)(n)}};return e=Object(m.d)(a),n("addItem"),n("removeItem"),n("updateItem"),"undefined"!==typeof window&&(window.ss=window.store=e),e}(h({getInitalList:function(){return _()},addItem:function(e){var t=_();t.push(e),z(t)},updateItem:function(e){var t=_(),n=f.find(t,{secret:e.secret});Object.assign(n,e),z(t)},removeItem:function(e){var t=_();f.remove(t,{secret:e.secret}),z(t)}})),K=function(e){var t,n={appRoute:E.Main,addForm:{isEdit:!1,secret:"",remark:""}};return t=Object(m.d)(n),"undefined"!==typeof window&&(window.appss=window.appstore=t),t}();Object(H.a)();var Q=Object(i.a)(function(){return Object(a.useEffect)(function(){},[]),o.a.createElement(v.Provider,{value:G},o.a.createElement(w.Provider,{value:K},o.a.createElement("div",{className:"app"},o.a.createElement(q,null))))}),V=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function X(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(o.a.createElement(Q,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat(".","/service-worker.js");V?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):X(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):X(t,e)})}}()},79:function(e,t,n){e.exports=n(141)},84:function(e,t,n){}},[[79,2,1]]]);
//# sourceMappingURL=main.af64822b.chunk.js.map